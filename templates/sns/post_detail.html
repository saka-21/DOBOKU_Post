{% extends 'base.html' %}

{% block content %}
    <h2>{{ object.title }}</h2>
    <img src="{{object.image.url}}" width="80%" height="50%"  id="card_top">
    <p>{{ object.author }}</p>
    <p>{{ object.content }}</p>
{% endblock %}

{% block aside %}
    <article class="">
        <a class="" href="{% url 'sns:comment_form' post.pk %}">コメントを投稿する</a>
    </article>

    {% for comment in post.comments.all %}
        <strong>{{ comment.author }}</strong>・{{ comment.timestamp|date:"y/n/j H:i" }}
        <div class='comment_text'>
            <p>{{ comment.text|linebreaksbr }}</p>
        </div>
        <p>
            <a href="{% url 'sns:reply_form' comment.pk %}">返信する</a>
        </p>

        {% for reply in comment.replies.all %}
            <strong>{{ reply.author }}</strong>・{{ reply.timestamp }}
            <div class='reply_text'>
                <p>{{ reply.text|linebreaksbr }}</p>
            </div>
        {% endfor %}
    {% endfor %}

{% endblock %}
