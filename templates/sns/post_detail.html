{% extends 'base.html' %}

{% block content %}
    <h2>{{ object.title }}</h2>
    <span>
        <a href="{% url 'sns:my_page' post.author.id %} ">
            <p class='post_author'>{{ object.author }}</p>
        </a>
    </span>
    <img src="{{object.image.url}}" width="80%" height="50%"  id="card_top">
    <p>{{ object.content }}</p>
{% endblock %}

{% block aside %}
    <button class="uk-button uk-button-default">
        <a class="" href="{% url 'sns:comment_form' post.pk %}">コメントを投稿する</a>
    </button>
    <ul class="uk-comment-list">
        <li>
            {% for comment in post.comments.all %}
                <article class="uk-comment uk-comment-primary uk-visible-toggle">
                    <strong>{{ comment.author }}</strong>・{{ comment.timestamp|date:"y/n/j H:i" }}
                    <div class='comment_text'>
                        <p>{{ comment.text|linebreaksbr }}</p>
                    </div>
                    <button class="uk-button uk-button-default uk-button-small">
                        <a href="{% url 'sns:reply_form' comment.pk %}">返信する</a>
                    </button>
                </article>
                <ul>
                    <li>
                        {% for reply in comment.replies.all %}
                            <article class="uk-comment uk-comment-primary uk-visible-toggle">
                                <strong>{{ reply.author }}</strong>・{{ reply.timestamp|date:"y/n/j H:i" }}
                                <div class='reply_text'>
                                    <p>{{ reply.text|linebreaksbr }}</p>
                                </div>
                                <button class="uk-button uk-button-default uk-button-small">
                                    <a href="{% url 'sns:reply_form' comment.pk %}">返信する</a>
                                </button>
                            </article>
                        {% endfor %}
                    </li>
                </ul>
            {% endfor %}
        </li>
    </ul>

{% endblock %}
