{% extends 'base.html' %}

{% block content %}
    <h4>「{{ category.name }}」の投稿一覧</h4>
    <p>
        <a href="{% url 'sns:category_post' category.slug 0 %}">新しい順</a>
        <a href="{% url 'sns:category_post' category.slug 1 %}">古い順</a>
    </p>
    <div class="uk-grid-small uk-child-width-1-3@m" uk-grid>
    {% for post in object_list %}
        <div>
            <a href="{% url 'sns:post_detail' pk=post.id %}">
                <div class="uk-card uk-card-hover uk-card-default" id="card">
                    <div class="uk-card-media-top">
                        <img src="{{post.image.url}}" width="100%" height="50%"  id="card_top">
                    </div>
                    <div class="uk-card uk-accordion-content">
                        <ul>
                            <li>{{ post.author }}</li>
                            <li>{{ post.title }}</li>
                            <p class="content">{{ post.content }}</p>
                            <li class="time">{{ post.published_at|date:"y/n/j H:i" }}</li>
                        </ul>
                    </div>
                </div>
            </a>
        </div>
    {% endfor %}
    </div>
{% endblock %}

{% block aside %}
    <!--検索フォーム-->
    <div class="uk-margin">
        <form class="uk-search uk-search-default" action="" method="get">
            <a type="submit" uk-search-icon></a>
            <input class="uk-search-input" name="query" value="{{ request.GET.query }}" type="search" placeholder="Search...">
        </form>
    </div>
    <!--検索フォーム-->

    <h3>カテゴリー</h3>
    <ul class="uk-nav uk-nav-default">
        <ul>
            <li class="uk-nav-divider"></li>
            {% for category in category_list %}
                <li><a href="{% url 'sns:category_post' category.slug %}">{{ category }}</a></li>
            <li class="uk-nav-divider"></li>
            {% endfor %}
        </ul>
    </ul>
{% endblock %}
